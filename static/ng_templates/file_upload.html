<div id="main">
    <div class="wrapper">
        <section id="content">
            <nav>
                <div class="nav-wrapper">
                  <div class="col s12">
                    <a class="breadcrumb">Upload .msg file format</a>
                  </div>
                </div>
              </nav>
            <div class="container">
                <form method="post" enctype="multipart/form-data">
                    <div class="file-field input-field">
                        <div class="btn">
                            <span>Browse</span>
                            <input type="file" name="msg" id='msg'>
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                    <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                    </button>       
                </form>
            </div>
        </section>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        var $form = $('form');
        $form.submit(function() {
            
            var formData = new FormData();
            formData.append('file', $('#msg')[0].files[0]);

            $.ajax({
                type: "POST",
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                cache: false,
                url: "/email/parse/",
                data: formData,
                success: function(response){
                    console.log(response);
                    swal({
                        title: 'Success',
                        text: "File uploaded successfully.",
                        type: 'success'
                    });
                },
                error: function(error){
                    swal({
                        title: 'Failure',
                        text: "File upload unsuccessful.",
                        type: 'error'
                    });
                },
            });
            return false;
        });
    });
</script>